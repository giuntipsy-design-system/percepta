<div
  class="app-shell"
  [class.app-shell--home]="isHomePage"
  [class.app-shell--prototype]="isPrototypePage"
>
  <header
    *ngIf="!isPrototypePage"
    class="app-header"
    [class.app-header--scrolled]="hasScrolled"
  >
    <div class="header-inner">
      <div class="app-brand">
        <a class="brand-link" routerLink="/">
          <h1>Percepta Design System</h1>
        </a>
      </div>
      <nav class="header-nav">
        <a routerLink="/getting-started" routerLinkActive="active">Getting started</a>
        <a routerLink="/components" routerLinkActive="active">Components</a>
        <a routerLink="/patterns" routerLinkActive="active">Patterns</a>
        <a routerLink="/accessibility" routerLinkActive="active">Accessibility</a>
        <a routerLink="/changelog" routerLinkActive="active">Changelog</a>
      </nav>
      <div class="header-actions">
        <a
          class="header-action-link"
          href="https://github.com/giuntipsy-design-system/percepta"
          target="_blank"
          rel="noreferrer"
          aria-label="Percepta on GitHub"
        >
          <gp-icon name="github" [decorative]="true"></gp-icon>
        </a>
        <gp-button variant="ghost" [iconOnly]="true" ariaLabel="Toggle theme">
          <gp-icon name="half-moon" [decorative]="true"></gp-icon>
        </gp-button>
      </div>
    </div>
  </header>

  <div
    class="layout-shell"
    [class.layout-shell--no-nav]="isHomePage || isChangelogPage || isAccessibilityPage || isPrototypePage"
  >
    <nav class="app-nav" *ngIf="!isHomePage && !isChangelogPage && !isAccessibilityPage && !isPrototypePage">
      <ng-container *ngIf="isGettingStartedPage; else nonGettingStartedNav">
        <span class="nav-title">Getting started</span>
        <a
          [routerLink]="gettingStartedNav[0].route"
          [class.active]="isGettingStartedOverview"
        >
          {{ gettingStartedNav[0].label }}
        </a>
        <a
          [routerLink]="gettingStartedNav[1].route"
          routerLinkActive="active"
        >
          {{ gettingStartedNav[1].label }}
        </a>
        <a
          [routerLink]="gettingStartedNav[2].route"
          routerLinkActive="active"
        >
          {{ gettingStartedNav[2].label }}
        </a>
      </ng-container>
      <ng-template #nonGettingStartedNav>
        <ng-container *ngIf="isComponentsPage; else nonComponentsNav">
          <span class="nav-title">Components</span>
          <a
            *ngFor="let item of componentsNav.ready"
            [routerLink]="item.route"
            routerLinkActive="active"
          >
            {{ item.label }}
          </a>
          <span class="nav-subtitle">Planned</span>
          <span *ngFor="let item of componentsNav.planned" class="nav-item-disabled">
            {{ item }}
          </span>
        </ng-container>
        <ng-template #nonComponentsNav>
          <ng-container *ngIf="isPatternsPage; else defaultNav">
            <span class="nav-title">Patterns</span>
            <a
              *ngFor="let item of patternsNav"
              [routerLink]="item.route"
              routerLinkActive="active"
            >
              {{ item.label }}
            </a>
            <span class="nav-subtitle">Planned</span>
            <span *ngFor="let item of patternsPlanned" class="nav-item-disabled">
              {{ item }}
            </span>
          </ng-container>
          <ng-template #defaultNav>
            <a routerLink="/overview" routerLinkActive="active">Overview</a>
            <a routerLink="/tokens" routerLinkActive="active">Tokens</a>
            <a routerLink="/prime-baseline" routerLinkActive="active">PrimeNG baseline</a>
            <a routerLink="/components" routerLinkActive="active">Components</a>
            <a routerLink="/patterns" routerLinkActive="active">Patterns</a>
            <a routerLink="/accessibility" routerLinkActive="active">Accessibility</a>
            <a routerLink="/changelog" routerLinkActive="active">Changelog</a>
          </ng-template>
        </ng-template>
      </ng-template>
    </nav>

    <main
      class="app-content"
      [class.app-content--home]="isHomePage"
      (scroll)="onContentScroll($event)"
      #appContent
    >
      <div class="content-inner" [class.content-inner--home]="isHomePage">
        <section class="docs-content" *ngIf="!isPrimeBaseline">
          <router-outlet></router-outlet>
        </section>
        <ng-container *ngIf="isPrimeBaseline">
          <router-outlet></router-outlet>
        </ng-container>
        <footer class="app-footer" *ngIf="!isPrototypePage">
          <div class="footer-inner">
            <span>
              Percepta Design System |
              <a class="footer-link" routerLink="/prototypes/vol/login">Prototypes</a>
            </span>
            <span class="footer-meta">
              2026
              <a class="footer-link" href="https://giuntipsy.com" target="_blank" rel="noreferrer">
                Giunti Psychometrics
              </a>
            </span>
            <a
              class="footer-link"
              href="https://design.giuntipsy.com"
              target="_blank"
              rel="noreferrer"
            >
              design.giuntipsy.com
              <gp-icon name="open-new-window" [decorative]="true"></gp-icon>
            </a>
          </div>
        </footer>
      </div>
    </main>
  </div>
</div>
