<section class="page">
  <header class="doc-card doc-card--intro">
    <p class="eyebrow">Pattern</p>
    <h2 class="docs-h1">Form layout &amp; validation</h2>
    <p class="overview-lead">
      Forms should communicate intent, hierarchy, and feedback clearly. Layout and validation
      decisions affect how users perceive risk, effort, and confidence while completing a task.
    </p>
    <p class="overview-lead">
      This pattern defines how to group fields, label inputs, and surface validation in a way that
      keeps forms readable and predictable across products.
    </p>
  </header>

  <section class="section doc-card">
    <h3 class="docs-h2">Basic form layout</h3>
    <p class="docs-body">
      Forms follow a vertical flow by default. Use one field per line, consistent spacing between
      inputs, and a shared width so fields align as a single unit.
    </p>
    <p class="docs-body">
      In this pattern, spacing between fields uses <strong>spacing.layout.md</strong>, and the
      actions block is separated from the last field with <strong>spacing.layout.lg</strong>.
    </p>
    <div class="demo-box">
      <div class="form-demo">
        <form class="demo-form">
          <gp-input
            label="Full name"
            placeholder="Enter full name"
            ariaLabel="Full name"
          ></gp-input>
          <div class="demo-field">
            <label for="basic-role">Role</label>
            <p-select
              inputId="basic-role"
              [options]="roleOptions"
              optionLabel="label"
              optionValue="value"
              [checkmark]="true"
              [(ngModel)]="selectedRole"
              name="basic-role"
            ></p-select>
          </div>
          <div class="demo-field">
            <label for="basic-notes">Notes</label>
            <textarea
              id="basic-notes"
              pInputTextarea
              [(ngModel)]="notesValue"
              name="basic-notes"
              placeholder="Add observations"
              rows="4"
            ></textarea>
          </div>
          <div class="form-actions">
            <gp-button label="Submit" variant="primary"></gp-button>
            <gp-button label="Cancel" variant="secondary"></gp-button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <section class="section doc-card">
    <h3 class="docs-h2">Field grouping</h3>
    <p class="docs-body">
      Group related fields under a shared heading to signal structure. Grouping can be visual or
      semantic, but both should help users understand how fields relate to each other.
    </p>
    <p class="docs-body">
      Use <strong>spacing.layout.md</strong> between the group title and its fields, and
      <strong>spacing.layout.lg</strong> between groups. Within choice lists, use
      <strong>spacing.layout.xs</strong> between options.
    </p>
    <div class="demo-box">
      <div class="form-demo">
        <div class="demo-group">
          <h4 class="docs-h3">Personal information</h4>
          <gp-input
            label="Candidate name"
            placeholder="Enter name"
            ariaLabel="Candidate name"
          ></gp-input>
          <gp-input
            label="Email"
            placeholder="name@company.com"
            ariaLabel="Email"
          ></gp-input>
        </div>
        <div class="demo-group">
          <h4 class="docs-h3">Preferences</h4>
          <div class="demo-field">
            <label for="pref-contact">Preferred contact</label>
            <div class="demo-option-row">
              <p-radioButton
                inputId="pref-email"
                name="pref-contact"
                value="email"
                [(ngModel)]="contactMethod"
              ></p-radioButton>
              <label for="pref-email">Email</label>
            </div>
            <div class="demo-option-row">
              <p-radioButton
                inputId="pref-phone"
                name="pref-contact"
                value="phone"
                [(ngModel)]="contactMethod"
              ></p-radioButton>
              <label for="pref-phone">Phone</label>
            </div>
          </div>
          <div class="demo-field">
            <label for="pref-updates">Updates</label>
            <div class="demo-option-row" *ngFor="let option of preferenceOptions">
              <p-checkbox
                [inputId]="'pref-' + option.value"
                [value]="option.value"
                [(ngModel)]="preferenceValues"
                name="pref-updates"
              ></p-checkbox>
              <label [for]="'pref-' + option.value">{{ option.label }}</label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section doc-card">
    <h3 class="docs-h2">Labels and helper text</h3>
    <p class="docs-body">
      Labels describe the purpose of a field. Helper text adds context and guidance but never
      replaces a visible label. Place helper text directly below the field.
    </p>
    <div class="demo-box">
      <div class="form-demo">
        <div class="demo-form">
          <gp-input
            label="Assessment context"
            placeholder="e.g. Clinical intake"
            helperText="Use the same label shown to candidates."
            ariaLabel="Assessment context"
          ></gp-input>
          <div class="demo-field">
            <label for="label-notes">Notes</label>
            <textarea
              id="label-notes"
              pInputTextarea
              placeholder="Optional notes"
              rows="3"
            ></textarea>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="section doc-card">
    <h3 class="docs-h2">Validation and error handling</h3>
    <p class="docs-body">
      Errors should appear at the field level with clear, actionable messages. Avoid showing errors
      before users have interacted with a field.
    </p>
    <div class="demo-box">
      <div class="form-demo">
        <div class="demo-form demo-form--two-col">
          <gp-input
            label="Reference ID"
            placeholder="e.g. GP-3921"
            ariaLabel="Reference ID"
          ></gp-input>
          <gp-input
            label="Session code"
            value="12A-77"
            ariaLabel="Session code"
            state="error"
            errorText="This code is expired."
          ></gp-input>
        </div>
        <div class="demo-field">
          <label for="validation-notes">Notes</label>
          <textarea
            id="validation-notes"
            pInputTextarea
            [invalid]="true"
            [(ngModel)]="validationNotes"
            name="validation-notes"
            rows="3"
          ></textarea>
          <p class="demo-help demo-help--error">Please add the missing details.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="section doc-card">
    <h3 class="docs-h2">Required fields</h3>
    <p class="docs-body">
      Whenever possible, communicate required fields through structure rather than symbols.
      Placing mandatory fields first helps users understand what is expected without additional
      visual markers.
    </p>
    <p class="docs-body">
      Optional fields can be grouped separately, introduced under a clear heading, or hidden
      behind an expandable section such as “Advanced options”. This reduces visual noise and keeps
      the primary task focused.
    </p>
    <p class="docs-body">
      Use explicit indicators only when structural separation is not feasible. In those cases,
      prefer marking optional fields clearly. Asterisks may be used as a fallback, but should not be
      the primary mechanism for conveying requirement.
    </p>
    <div class="demo-box">
      <div class="form-demo">
        <div class="demo-form">
          <gp-input
            label="Email"
            placeholder="name@company.com"
            ariaLabel="Email"
          ></gp-input>
          <div class="demo-group">
            <h4 class="docs-h3">Optional information</h4>
            <gp-input
              label="Company"
              placeholder="Company"
              ariaLabel="Company optional"
            ></gp-input>
          </div>
        </div>
      </div>
    </div>
    <p class="docs-body">
      When a form has very few fields and there is no space for an optional section title, note
      optionality directly in the label.
    </p>
    <div class="demo-box">
      <div class="form-demo">
        <div class="demo-form">
          <gp-input
            label="Email"
            placeholder="name@company.com"
            ariaLabel="Email"
          ></gp-input>
          <gp-input
            label="Company (optional)"
            placeholder="Company"
            ariaLabel="Company optional"
          ></gp-input>
        </div>
      </div>
    </div>
  </section>

  <section class="section doc-card">
    <h3 class="docs-h2">Form actions</h3>
    <p class="docs-body">
      Emphasize the primary action and separate secondary actions visually. Avoid multiple primary
      actions and disable actions while submitting.
    </p>
    <p class="docs-body">
      Keep actions aligned with the form width and separated from fields using
      <strong>spacing.layout.lg</strong>.
    </p>
    <div class="demo-box">
      <div class="demo-actions">
        <gp-button label="Submit" variant="primary"></gp-button>
        <gp-button label="Cancel" variant="secondary"></gp-button>
      </div>
    </div>
  </section>

  <section class="section doc-card">
    <h3 class="docs-h2">Accessibility considerations</h3>
    <p class="docs-body">
      Accessibility should be considered from the earliest design decisions, not added as a final
      step. Clear structure, meaningful labels, and predictable feedback all contribute to
      accessible forms.
    </p>
    <p class="docs-body">
      Ensure labels are properly associated with inputs and that error messages are accessible to
      assistive technologies. Maintain a logical tab order and avoid relying on color alone to
      communicate state.
    </p>
  </section>
</section>
